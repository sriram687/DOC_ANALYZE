services:
  - type: web
    name: doc-analyze-api
    env: python
    plan: free
    buildCommand: pip install -r requirements_render.txt
    startCommand: bash start.sh
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
      - key: GEMINI_API_KEY
        sync: false
      - key: PINECONE_API_KEY
        sync: false
      - key: PINECONE_INDEX_NAME
        sync: false
      - key: PINECONE_ENVIRONMENT
        value: us-east-1
      - key: PINECONE_DIMENSION
        value: 768
      - key: PINECONE_METRIC
        value: cosine
      - key: GEMINI_CHAT_MODEL
        value: gemini-2.5-pro
      - key: GEMINI_EMBEDDING_MODEL
        value: models/text-embedding-004
      - key: CHUNK_SIZE
        value: 1000
      - key: CHUNK_OVERLAP
        value: 200
      - key: TOP_K_CHUNKS
        value: 10
      - key: MAX_FILE_SIZE
        value: 52428800
    healthCheckPath: /health
